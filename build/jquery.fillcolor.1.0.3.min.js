/*! jquery.fillcolor 2016-02-08 */

!function(a){"use strict";var b={avg:function(a){for(var b={r:0,g:0,b:0},c=0,d=4,e=0;e<a.data.length;e+=d)(255!==a.data[e]||255!==a.data[e+1]||255!==a.data[e+2])&&(b.r+=a.data[e],b.g+=a.data[e+1],b.b+=a.data[e+2],c++);return b.r=Math.round(b.r/c),b.g=Math.round(b.g/c),b.b=Math.round(b.b/c),b},avgYUV:function(a){for(var b={r:0,g:0,b:0},c={y:0,u:0,v:0},d=0,e=4,f=function(a){return a/(Math.abs(a)+.4)},g=0;g<a.data.length;g+=e)(255!==a.data[g]||255!==a.data[g+1]||255!==a.data[g+2])&&(b.r=a.data[g]/255,b.g=a.data[g+1]/255,b.b=a.data[g+2]/255,c.y+=.299*b.r+.587*b.g+.114*b.b,c.u+=-.147*b.r-.289*b.g+.436*b.b,c.v+=.615*b.r-.515*b.g-.1*b.b,d++);return c.y=f(c.y/d),c.u=f(c.u/d),c.v=f(c.v/d),b.r=c.y+1.3983*c.v,b.g=c.y-.3946*c.u-.5806*c.v,b.b=c.y+2.0321*c.u,b.r=Math.round(255*b.r),b.g=Math.round(255*b.g),b.b=Math.round(255*b.b),b}};a.fn.fillColor=function(c){var d=a("body"),e=a.extend({type:"avg"},c);return this.each(function(){var c=a(this),f=a("img",c).eq(0),g=a("<img/>");f.length&&(g.on("load cached",function(){var d,f;if(d=g.width(),f=g.height(),d>0&&f>0){var h,i,j=document.createElement("canvas"),k=j.getContext("2d");k.fillStyle="rgb(255, 255, 255)",k.fillRect(0,0,d,f),k.drawImage(g[0],0,0,d,f),g.remove();try{h=k.getImageData(0,0,d,f),i=b[e.type](h),c.css("background-color","rgb("+i.r+", "+i.g+", "+i.b+")")}catch(l){a.error(l.message+"(jQuery.fillcolor)")}}else g.remove()}).on("abort error",function(){g.remove()}).attr("src",f.attr("src")),d.append(g))})}}(jQuery);
//# sourceMappingURL=jquery.fillcolor.1.0.3.min.js.map